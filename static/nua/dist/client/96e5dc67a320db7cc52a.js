(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{428:function(e,t,o){var content=o(470);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(6).default)("c61540e6",content,!0,{sourceMap:!1})},468:function(e,t,o){e.exports=o.p+"img/608d7c1.png"},469:function(e,t,o){"use strict";var c=o(428);o.n(c).a},470:function(e,t,o){(e.exports=o(5)(!1)).push([e.i,"p.mensajeError[data-v-214d4288]{color:red;font-weight:400;font-size:1.4em}",""])},483:function(e,t,o){"use strict";o.r(t);var c=o(19),r=o(165),l=o.n(r),n=o(33),d={middleware:["check-auth","inicioAdmin"],head:{script:[{src:"https://cdn.emailjs.com/sdk/2.3.2/email.min.js"}]},data:function(){return{modallogin:!1,modalacceso:!1,modalrestablecer:!1,valid:!1,email:"",emailRules:[function(e){return!!e||"Debe escribir una dirección de correo"},function(e){return/.+@.+/.test(e)||"El correo debe ser válido"}],password:"Password",show1:!1,rules:{required:function(e){return!!e||"Requerido."},min:function(e){return e.length>=8||"Mínimo 8 caracteres"}},email_solicitaaceso:"",valid_solicitaaceso:!1,mensaje_solicitaacceso:null,status_solicitaacceso:null,email_restablecer:"",valid_restablecer:!1,mensaje_restablecer:null,status_restablecer:null}},computed:Object(c.a)({},Object(n.b)(["esAutenticado","cuantasestadisticas","cuantasfechas","cuantaspeliculas","visitaspaises"]),Object(n.c)(["estadologin"])),methods:{abreLogin:function(){var e=this;this.modallogin=!0,this.$refs.focoinicial&&this.$nextTick(function(){return e.$refs.focoinicial.focus()})},abreSolicitaracceso:function(){var e=this;this.modalacceso=!0,this.$refs.focoinicialacceso&&this.$nextTick(function(){return e.$refs.focoinicialacceso.focus()})},abreRestablecer:function(){var e=this;this.modalrestablecer=!0,this.$refs.focoinicialrestablecer&&this.$nextTick(function(){return e.$refs.focoinicialrestablecer.focus()})},onSubmit:function(){this.$store.dispatch("authenticateUser",{email:this.email,password:this.password})},accesoexitoso:function(){this.modallogin=!1,this.$router.push("/Estadisticas/base")},enviaEmail:function(){var e=this,t={to_name:"Querido James",correo:this.email_solicitaaceso,message_html:"Welcome to EmailJS documentation! Here are a few good places to start:"};emailjs.init("user_wYDPvWn76KJLnrjUWgmAD"),emailjs.send("gmail","solicitaaceso",t).then(function(t){e.status_solicitaacceso=t.status,e.mensaje_solicitaacceso="Mensaje enviado. Muy pronto recibirá respuesta e indicaciones al correo ".concat(e.email_solicitaaceso),console.log(t)}).catch(function(t){e.status_solicitaacceso=res.status,e.mensaje_solicitaacceso="La cagamos y mal ".concat(t.text),console.log(t)})},restablecerpassword:function(){var e=this;return l.a.post("https://www.googleapis.com/identitytoolkit/v3/relyingparty/getOobConfirmationCode?key=AIzaSyCcS-fd7pP5fpQbNXtLvABn0ZWUQE2L8S4",{email:this.email_restablecer,requestType:"PASSWORD_RESET"}).then(function(t){console.log(t.status),e.status_restablecer=t.status,e.mensaje_restablecer="Solicitud enviada. Consulte su correo electrónico para continuar con el cambio de la contraseña"}).catch(function(t){t.response&&(console.log(t.response.data.error.message),console.log(t.response.status),e.status_restablecer=t.response.status,e.mensaje_restablecer="El correo no ha sido activado para las Estadísticas de Retina Latina. Por favor solicite su acceso.")})}},mounted:function(){this.tituloSeccion("Acceso"),console.log("El camino es laaaargo")}},v=(o(469),o(17)),m=o(25),f=o.n(m),_=o(125),x=o(124),h=o(302),w=o(123),k=o(113),C=o(405),j=o(120),y=o(442),E=o(121),S=o(299),R=o(432),component=Object(v.a)(d,function(){var e=this,t=e.$createElement,c=e._self._c||t;return c("v-layout",{attrs:{row:"",wrap:"","text-xs-center":""}},[e.esAutenticado?e._e():c("v-flex",{attrs:{xs12:"",md4:""}},[c("v-btn",{attrs:{dark:"",color:"retinaazul"},on:{click:e.abreLogin}},[e._v("Acceder a estadísticas Retina Latina")])],1),e._v(" "),c("v-flex",{attrs:{xs12:"",md4:""}},[c("v-btn",{attrs:{dark:"",color:"retinaazul"},on:{click:e.abreSolicitaracceso}},[e._v("Solicitar acceso")])],1),e._v(" "),c("v-flex",{attrs:{xs12:"",md4:""}},[c("v-btn",{attrs:{dark:"",color:"retinaazul"},on:{click:e.abreRestablecer}},[e._v("Restablecer contraseña")])],1),e._v(" "),c("v-flex",{staticClass:"pa-5",attrs:{xs12:"",md8:"","offset-md2":""}},[c("img",{attrs:{src:o(468),alt:""}})]),e._v(" "),c("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.modallogin,callback:function(t){e.modallogin=t},expression:"modallogin"}},[c("v-card",[c("v-card-title",[c("span",{staticClass:"headline"},[e._v("Acceder a las estadísticas de Retina Latina")])]),e._v(" "),c("v-card-text",[c("v-container",{attrs:{"grid-list-md":""}},[c("v-layout",{attrs:{wrap:""}},[c("v-flex",{attrs:{xs12:""}},[e.esAutenticado?e._e():c("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[c("v-container",[c("v-layout",{attrs:{row:"",wrap:""}},[c("v-flex",{attrs:{xs12:""}},[c("v-text-field",{ref:"focoinicial",attrs:{rules:e.emailRules,label:"Correo electrónico",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e._v(" "),c("v-flex",{attrs:{xs12:""}},[c("v-text-field",{attrs:{"append-icon":e.show1?"visibility_off":"visibility",rules:[e.rules.required,e.rules.min],type:e.show1?"text":"password",name:"input-10-1",label:"Contraseña",hint:"Por lo menos 8 caracteres",counter:""},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1)],1)],1)],1),e._v(" "),c("v-flex",{attrs:{xs10:"","offset-xs1":""}},[c("p",{staticClass:"mensajeError"},[e._v(e._s(e.estadologin))])])],1)],1)],1),e._v(" "),c("v-card-actions",[c("v-spacer"),e._v(" "),e.valid&&!e.esAutenticado?c("v-btn",{attrs:{color:"success"},on:{click:e.onSubmit}},[e._v("Enviar")]):e._e(),e._v(" "),"Ingreso exitoso"===e.estadologin?c("v-btn",{attrs:{color:"success"},on:{click:e.accesoexitoso}},[e._v("Continuar")]):e._e(),e._v(" "),c("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(t){e.modallogin=!1}}},[e._v("Cerrar")])],1)],1)],1),e._v(" "),c("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.modalacceso,callback:function(t){e.modalacceso=t},expression:"modalacceso"}},[c("v-card",[c("v-card-title",[c("span",{staticClass:"headline"},[e._v("Solicitud de acceso")])]),e._v(" "),c("v-card-text",[c("v-container",{attrs:{"grid-list-md":""}},[c("v-layout",{attrs:{wrap:""}},[c("v-flex",{attrs:{xs12:""}},[c("v-form",{model:{value:e.valid_solicitaaceso,callback:function(t){e.valid_solicitaaceso=t},expression:"valid_solicitaaceso"}},[c("v-container",[c("v-layout",{attrs:{row:"",wrap:""}},[c("v-flex",{attrs:{xs12:""}},[200!=e.status_solicitaacceso?c("v-text-field",{ref:"focoinicialacceso",attrs:{rules:e.emailRules,label:"Correo electrónico",required:""},model:{value:e.email_solicitaaceso,callback:function(t){e.email_solicitaaceso=t},expression:"email_solicitaaceso"}}):e._e()],1),e._v(" "),c("v-flex",{attrs:{xs10:"","offset-xs1":""}},[e._v(e._s(e.mensaje_solicitaacceso))])],1)],1)],1)],1)],1)],1)],1),e._v(" "),c("v-card-actions",[c("v-spacer"),e._v(" "),e.valid_solicitaaceso&&200!=e.status_solicitaacceso?c("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:e.enviaEmail}},[e._v("Envía")]):e._e(),e._v(" "),c("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(t){e.modalacceso=!1,e.mensaje_solicitaacceso=null,e.status_solicitaacceso=null,e.email_solicitaaceso=""}}},[e._v("Cerrar")])],1)],1)],1),e._v(" "),c("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.modalrestablecer,callback:function(t){e.modalrestablecer=t},expression:"modalrestablecer"}},[c("v-card",[c("v-card-title",[c("span",{staticClass:"headline"},[e._v("Restablecer contraseña")])]),e._v(" "),c("v-card-text",[c("v-container",{attrs:{"grid-list-md":""}},[c("v-layout",{attrs:{wrap:""}},[c("v-flex",{attrs:{xs12:""}},[c("v-form",{model:{value:e.valid_restablecer,callback:function(t){e.valid_restablecer=t},expression:"valid_restablecer"}},[c("v-container",[c("v-layout",{attrs:{row:"",wrap:""}},[c("v-flex",{attrs:{xs12:""}},[c("v-text-field",{ref:"focoinicialrestablecer",attrs:{rules:e.emailRules,label:"Correo electrónico",required:""},model:{value:e.email_restablecer,callback:function(t){e.email_restablecer=t},expression:"email_restablecer"}})],1),e._v(" "),c("v-flex",{attrs:{xs10:"","offset-xs1":""}},[e._v(e._s(e.mensaje_restablecer))])],1)],1)],1)],1)],1)],1)],1),e._v(" "),c("v-card-actions",[c("v-spacer"),e._v(" "),e.valid_restablecer&&!e.status_restablecer?c("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:e.restablecerpassword}},[e._v("Enviar solicitud")]):e._e(),e._v(" "),400==e.status_restablecer?c("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(t){e.modalrestablecer=!1,e.modalacceso=!0,e.email_solicitaaceso=e.email_restablecer}}},[e._v("Solicitar acceso")]):e._e(),e._v(" "),c("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(t){e.modalrestablecer=!1,e.email_restablecer=""}}},[e._v("Cerrar")])],1)],1)],1)],1)},[],!1,null,"214d4288",null);t.default=component.exports;f()(component,{VBtn:_.a,VCard:x.a,VCardActions:h.a,VCardText:h.b,VCardTitle:w.a,VContainer:k.a,VDialog:C.a,VFlex:j.a,VForm:y.a,VLayout:E.a,VSpacer:S.a,VTextField:R.a})}}]);